function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}let formValidator=function(){function a(b,c){_classCallCheck(this,a),_defineProperty(this,"init",void 0),_defineProperty(this,"allValid",!0),_defineProperty(this,"debounceTime",1e3),_defineProperty(this,"debounceSetTimeout",void 0),_defineProperty(this,"dangerColor","#ffd9d7bd"),_defineProperty(this,"successColor","white"),_defineProperty(this,"errorHash",{required:" field is required",number:" field must be a valid number",decimal:" field must be a valid decimal",price:" field must be a valid Price",max:" field can not be greater than ",min:" field can not be less than ",regex:" field is not valid "}),_defineProperty(this,"validator",void 0),_defineProperty(this,"validatorListener",void 0),_defineProperty(this,"elsInValidator",void 0),_defineProperty(this,"validatorForm",void 0),this.init=c,this.validator=b,this.validatorListener=this.validator.getAttribute("data-validate-listener"),this.elsInValidator=this.validator.querySelectorAll("[name]"),this.validatorForm=this.validator.querySelector("form"),this.startValidator(),this.listenInnerForm()}return _createClass(a,[{key:"startValidator",value:function startValidator(){for(let a=0;a<this.elsInValidator.length;a++){const b=this.elsInValidator[a],c=b.getAttribute("data-validate");c&&(this.init&&this.eachInputValidate(b),b.addEventListener(this.validatorListener,()=>{this.debounceSetTimeout&&clearTimeout(this.debounceSetTimeout),this.debounceSetTimeout=setTimeout(()=>this.eachInputValidate(b),this.debounceTime)}))}}},{key:"eachInputValidate",value:function eachInputValidate(a){const b=a.getAttribute("data-validate");if(!b)return;const c=a.getAttribute("data-validate-errors");let d=[];c&&(d=c.split("|"));const e=a.value.trim();let f=a.getAttribute("name");const g=a.getAttribute("data-validate-name");g&&(f=g);const h=b.split("|"),i={};let j="text";for(let b=0;b<h.length;b++){const c=h[b].trim();switch(i[c]=!0,c){case"required":if(""==e||null==e)return a.style.backgroundColor=this.dangerColor,this.displayError(a,d[b]?d[b]:f+" "+this.errorHash.required);a.style.backgroundColor=this.successColor,this.clearError(a);break;case"number":const g=parseInt(e);if(e!=g)return a.style.backgroundColor=this.dangerColor,this.displayError(a,d[b]?d[b]:f+" "+this.errorHash.number);a.style.backgroundColor=this.successColor,this.clearError(a),j="number";break;case"decimal":const h=parseFloat(e);if(e!=h)return a.style.backgroundColor=this.dangerColor,this.displayError(a,d[b]?d[b]:f+" "+this.errorHash.decimal);a.style.backgroundColor=this.successColor,this.clearError(a),j="decimal";break;case"price":const k=e.match(/(\d+(\.)?(\d{1,2})?)/);if(!k)return a.style.backgroundColor=this.dangerColor,this.displayError(a,d[b]?d[b]:f+" "+this.errorHash.price);a.style.backgroundColor=this.successColor,a.value=k[0],this.clearError(a),j="price";break;case"regex":const l=a.getAttribute("regex");if(!l)return;if(!e.match(new RegExp(l)))return a.style.backgroundColor=this.dangerColor,this.displayError(a,d[b]?d[b]:f+" "+this.errorHash.regex);a.style.backgroundColor=this.successColor,this.clearError(a),j="price";break;case"max":const m=parseInt(a.getAttribute("max"))?parseInt(a.getAttribute("max")):5;if("number"==j||"decimal"==j||"price"==j){if(parseInt(e)>=m||parseFloat(e)>=m)return a.style.backgroundColor=this.dangerColor,this.displayError(a,d[b]?d[b]:f+" "+this.errorHash.max+m);a.style.backgroundColor=this.successColor,this.clearError(a)}if("text"==j){if(e.length>=m)return a.style.backgroundColor=this.dangerColor,this.displayError(a,d[b]?d[b]:f+" "+this.errorHash.max+m+" Characters");a.style.backgroundColor=this.successColor,this.clearError(a)}break;case"min":const n=parseInt(a.getAttribute("min"))?parseInt(a.getAttribute("min")):5;if("number"==j||"decimal"==j||"price"==j){if(parseInt(e)<n||parseFloat(e)<n)return a.style.backgroundColor=this.dangerColor,this.displayError(a,d[b]?d[b]:f+" "+this.errorHash.min+n);a.style.backgroundColor=this.successColor,this.clearError(a)}if("text"==j){if(e.length<n)return a.style.backgroundColor=this.dangerColor,this.displayError(a,d[b]?d[b]:f+" "+this.errorHash.min+n+" Characters");a.style.backgroundColor=this.successColor,this.clearError(a)}break;default:}}}},{key:"displayError",value:function displayError(a,b){if(this.allValid=!1,a){const c=a.parentElement.querySelector(".validatorErrorDisplay");if(!c){const c=document.createElement("div");c.style.backgroundColor=this.dangerColor,c.style.color="#85221c",c.style.padding="10px",c.style.borderBottomLeftRadius="10px",c.style.borderBottomRightRadius="10px",c.style.top=a.offsetHeight+"px",c.style.maxWidth=a.offsetWidth+"px",c.innerText=b,c.className="validatorErrorDisplay",a.parentElement.appendChild(c)}else c.innerText=b}else document.querySelector(".validatorErrorDisplay").scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}},{key:"clearError",value:function clearError(a){const b=a.parentElement.querySelector(".validatorErrorDisplay");b&&b.parentElement.removeChild(b)}},{key:"listenInnerForm",value:function listenInnerForm(){this.validatorForm&&this.validatorForm.addEventListener("submit",a=>{if(!this.allValid)return a.preventDefault(),void this.displayError(null,"Please check This form for errors");const b=this.validatorForm.getAttribute("data-validate-submit");b&&new Function(b)()})}}]),a}();const validators=document.querySelector(".form-validator"),validator=validators;validator&&new formValidator(validator,!0);